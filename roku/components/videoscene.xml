<?xml version = "1.0" encoding = "utf-8" ?> 

<!--********** Copyright 2016 Roku Corp.  All Rights Reserved. **********-->

<component name = "NickTV" extends = "Scene" >

  <script type = "text/brightscript" >

    <![CDATA[

    sub init()
      getNowPlaying()
    end sub

    sub getNowPlaying()
      print "Creating NowPlaying Task..."
      m.nowPlayingTask = CreateObject("roSGNode", "nowPlayingTask")
      m.nowPlayingTask.ObserveField("uri", "playVideo")
      m.nowPlayingTask.control = "RUN"
    end sub

    sub playVideo() as void
      uri = m.nowPlayingTask.uri
      video = m.top.findNode("nowPlaying")
      if NOT (video.content <> invalid AND video.content.url = uri) then
        print "Now playing: " + m.nowPlayingTask.name
        videocontent = createObject("RoSGNode", "ContentNode")

        videocontent.title = "You're watching Nick TV"
        videocontent.streamformat = "mp4"
        videocontent.url = uri
        videocontent.playstart = 0

        video.content = videocontent

        video.enableUI = false
        video.setFocus(true)
        video.control = "play"
      else
        print "Already playing: " + m.nowPlayingTask.name
      end if
    end sub
    ]]>

  </script>

  <children >

    <Video id = "nowPlaying"/>

  </children>

</component>
